"0","## create cut off line for malawi"
"0","rest_zam1 <- gDifference(zambia_adm0 %>% "
"0","                           as(""SpatialLines""),"
"0","                         border_for_maw2) %>% "
"0","  gDifference(border_for_tanz3)"
"0","rest_zam2 <- rest_zam1@lines[[1]]@Lines[[1]]@coords  %>% "
"0","  as.data.frame"
"0","rest_zam3 <- rest_zam2 %>%"
"0","  mutate(x_max=max(x)) %>% "
"0","  filter(x!=x_max) %>% "
"0","  mutate(x_max2=max(x)) %>% "
"0","  filter(x==x_max2) %>% "
"0","  dplyr::select(x_max,x_max2) %>% "
"0","  unlist"
"0","split_line_malawi <- rbind("
"0","  c(20,lm(y~x,rest_zam4)$coef[2]*20+lm(y~x,rest_zam4)$coef[1]),"
"0","  rest_zam4,"
"0","  c(40,lm(y~x,rest_zam4)$coef[2]*40+lm(y~x,rest_zam4)$coef[1])"
"0",") %>% "
"0","  coords_to_line(proj4string(rest_zam1))"
"0","coords1_maw <- split_line_malawi@lines[[1]]@Lines[[1]]@coords %>% "
"0","  as.data.frame()"
"0","coords2_maw <- coords1_maw %>% "
"0","  mutate(y=y+10)"
"0","cropper_maw <- rbind(coords1_maw,coords2_maw[3:1,]) %>% "
"0","  Polygon %>% "
"0","  list %>%"
"0","  Polygons(ID=1) %>% "
"0","  list %>% "
"0","  SpatialPolygons(proj4string = "
"0","                    CRS(proj4string(split_line_malawi)))"
"0","# malawi border area"
"0","maw_border_area_0_to_50 <- prepare_sampling_area("
"0","  malawi_adm0,border_for_maw2,lakes,width_in_km = 50)"
"0","maw_border_area_0_to_50_cropped<-crop(maw_border_area_0_to_50,"
"0","                                      cropper_maw)"
"0","maw_border_area_50_to_100 <- prepare_sampling_area("
"0","  malawi_adm0,border_for_maw2,lakes,width_in_km = 100,split_width = 49) %>% "
"0","  gDifference(maw_border_area_0_to_50)"
"0","maw_border_area_50_to_100_cropped<-crop(maw_border_area_50_to_100,"
"0","                                      cropper_maw)"
"0","# Malawi bins"
"0","# preparing for border_for_maw3"
"0","border_for_maw3 <- lapply(1:length(border_for_maw2),function(x) {"
"0","  r1<-gLineMerge(border_for_maw2[x,])"
"0","  r1<-r1@lines[[1]]@Lines[[1]]@coords"
"0","  r1[nrow(r1):1,] %>% coords_to_line(proj4string(border_for_maw2))"
"0","maw_start_end <- lapply(1:length(border_for_maw3),function(x) {"
"0","  border_for_maw3_geom<-geom(border_for_maw3[x,])"
"0","  border_for_maw3_geom[c(1,nrow(border_for_maw3_geom)),c(""x"",""y"")]"
"0","}) %>% "
"0","  do.call(rbind,.) %>% "
"0","maw_sampling_bin <- prepare_sampling_bins("
"0","  start_end = maw_start_end[c(2,4),],"
"0","  number_of_bins = 5)"
